<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üíò –í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞-–∏–≥—Ä–∞ (3 –∫–æ–º–Ω–∞—Ç—ã)</title>

  <!-- Fonts: Intel One Mono + Ubuntu -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Intel+One+Mono:wght@300;400;600;700&family=Ubuntu:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg0:#05050a;
      --bg1:#0b0a14;
      --ink:#0e0c12;

      /* SEGA-ish palette */
      --neon1:#00ffd5;
      --neon2:#ff2a6d;
      --neon3:#7d5cff;
      --neon4:#ffe66d;

      --panel:#ffbfd6;
      --panel2:#ff9fc6;

      --px: 4px;
      --radius: 18px;
      --shadow: 0 20px 70px rgba(0,0,0,.55);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:
        radial-gradient(1100px 700px at 15% 15%, rgba(0,255,213,.14), transparent 60%),
        radial-gradient(900px 650px at 85% 30%, rgba(255,42,109,.14), transparent 60%),
        radial-gradient(1000px 750px at 40% 90%, rgba(125,92,255,.14), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      color: #fff;
      overflow:hidden;
      font-family: "Ubuntu", system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }

    /* CRT overlay */
    .crt{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:3;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(0,0,0,.18) 0px,
          rgba(0,0,0,.18) 1px,
          rgba(255,255,255,.02) 2px,
          rgba(255,255,255,.02) 4px
        );
      mix-blend-mode: overlay;
      opacity:.55;
    }
    .vignette{
      position:fixed; inset:-30%;
      pointer-events:none;
      z-index:2;
      background: radial-gradient(circle at 50% 50%, transparent 45%, rgba(0,0,0,.55) 75%);
      opacity:.7;
      filter: blur(18px);
    }

    /* floating hearts layer */
    .float-layer{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:4;
      overflow:hidden;
    }
    .float-heart{
      position:absolute;
      font-size: 18px;
      opacity:.9;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,.35));
      animation: rise linear forwards;
      will-change: transform, opacity;
      user-select:none;
    }
    @keyframes rise{
      0%{ transform: translate3d(0, 40px, 0) scale(.9); opacity:0; }
      12%{ opacity:.95; }
      100%{ transform: translate3d(0, -120vh, 0) scale(1.25); opacity:0; }
    }

    /* main layout */
    .wrap{
      position:relative;
      height:100%;
      display:grid;
      place-items:center;
      padding:22px;
      z-index:5;
    }

    /* pixel UI frame */
    .frame{
      width:min(980px, 96vw);
      min-height:min(560px, 80vh);
      background: linear-gradient(180deg, rgba(20,17,39,.92), rgba(13,11,26,.92));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
      outline: calc(var(--px)*2) solid rgba(0,255,213,.22);
      outline-offset: -10px;
    }
    .frame::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(1200px 600px at 50% -20%, rgba(255,255,255,.10), transparent 60%),
        linear-gradient(90deg, rgba(0,255,213,.12), transparent 30%, rgba(255,42,109,.10) 70%, transparent);
      pointer-events:none;
      opacity:.9;
    }

    .hud{
      position:relative;
      z-index:1;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      padding:16px 18px 12px;
      border-bottom: 1px solid rgba(255,255,255,.10);
    }
    .logo{
      display:flex;
      align-items:center;
      gap:12px;
      font-family: "Intel One Mono", ui-monospace, Menlo, Monaco, Consolas, monospace;
      font-weight: 800;
      letter-spacing: .6px;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 0 0 18px rgba(0,255,213,.25);
      user-select:none;
    }
    .logo .chip{
      width:14px; height:14px;
      background: var(--neon1);
      box-shadow: 0 0 0 6px rgba(0,255,213,.14), 0 0 28px rgba(0,255,213,.35);
    }
    .hud-right{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .pill{
      font-family:"Intel One Mono", ui-monospace, monospace;
      font-weight:700;
      font-size:12px;
      letter-spacing:.35px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      padding:8px 10px;
      border-radius: 999px;
      display:flex;
      gap:8px;
      align-items:center;
      user-select:none;
    }
    .pill b{ color: var(--neon4); font-weight:800; }
    .pill .dot{
      width:8px; height:8px;
      border-radius:99px;
      background: var(--neon2);
      box-shadow: 0 0 18px rgba(255,42,109,.35);
    }

    .screen{
      position:relative;
      z-index:1;
      padding:18px;
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:16px;
      height: calc(100% - 62px);
    }

    .panel{
      background: linear-gradient(180deg, rgba(255,191,214,.95), rgba(255,159,198,.92));
      color: var(--ink);
      border-radius: 16px;
      box-shadow: 0 14px 40px rgba(0,0,0,.25);
      overflow:hidden;
      position:relative;
      border: 1px solid rgba(255,255,255,.35);
    }
    .panel::after{
      content:"";
      position:absolute; inset:0;
      background:
        linear-gradient(90deg, rgba(0,255,213,.14), transparent 30%, rgba(125,92,255,.12) 70%, transparent);
      opacity:.55;
      pointer-events:none;
    }

    /* LEFT panel content */
    .left{
      padding:22px 22px 18px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    h1{
      margin:0;
      font-family:"Intel One Mono", ui-monospace, monospace;
      font-weight: 900;
      font-size: clamp(22px, 2.6vw, 44px);
      line-height:1.05;
      letter-spacing:-.6px;
      text-transform: uppercase;
    }
    .sub{
      margin:0;
      font-size: clamp(14px, 1.55vw, 18px);
      line-height:1.55;
      opacity:.86;
      min-height: 3.6em;
    }
    .objective{
      margin:6px 0 0;
      font-family:"Intel One Mono", ui-monospace, monospace;
      font-weight:900;
      text-transform: uppercase;
      letter-spacing:.35px;
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(0,0,0,.10);
      border-radius: 14px;
      padding:10px 12px;
      box-shadow: 0 12px 26px rgba(0,0,0,.12);
    }
    .objective b{ color: var(--neon2); }

    .actions{
      margin-top:6px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .btn{
      appearance:none;
      border:0;
      cursor:pointer;
      padding:12px 14px;
      border-radius: 12px;
      font-weight: 900;
      letter-spacing:.4px;
      font-family:"Intel One Mono", ui-monospace, monospace;
      text-transform: uppercase;
      transition: transform .08s ease, filter .2s ease, box-shadow .2s ease, opacity .2s ease;
      user-select:none;
      display:inline-flex;
      align-items:center;
      gap:10px;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }
    .btn[disabled]{ opacity:.55; cursor:not-allowed; }

    .btn-primary{
      color:white;
      background: linear-gradient(180deg, var(--neon2), #ff1f58);
      box-shadow: 0 16px 34px rgba(255,42,109,.32);
    }
    .btn-primary:hover{ filter: brightness(1.03); }
    .btn-ghost{
      background: rgba(255,255,255,.70);
      color: var(--ink);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 12px 26px rgba(0,0,0,.12);
    }

    .hint{
      margin-top:auto;
      padding-top:12px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      font-size:12.5px;
      opacity:.7;
      font-family:"Intel One Mono", ui-monospace, monospace;
    }
    .kbd{
      padding:2px 8px;
      border-radius: 10px;
      background: rgba(255,255,255,.72);
      border: 1px solid rgba(0,0,0,.10);
      font-weight:900;
    }

    /* RIGHT side */
    .right{ display:flex; flex-direction:column; gap:12px; }

    /* Bubu & Dudu (NOT Sega style) */
    .charbox{ display:grid; place-items:center; padding:12px; }
    .characters{
      width:100%;
      max-width: 360px;
      aspect-ratio: 1 / 1;
      border-radius: 18px;
      background: rgba(255,255,255,.62);
      border: 1px solid rgba(0,0,0,.06);
      box-shadow: 0 14px 34px rgba(0,0,0,.14);
      position:relative;
      overflow:hidden;
    }
    .characters .bubble{
      position:absolute;
      left:12px; top:12px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(0,0,0,.08);
      padding:8px 10px;
      border-radius: 14px;
      font-family:"Ubuntu", system-ui;
      font-weight:700;
      color: var(--ink);
      font-size: 13px;
      user-select:none;
    }
    .characters .bubble b{
      font-family:"Intel One Mono", ui-monospace, monospace;
      text-transform: uppercase;
      letter-spacing:.3px;
    }

    /* Room 2: letter tiles */
    .tiles{
      display:grid;
      grid-template-columns: repeat(6, 1fr);
      gap:10px;
      padding:12px 14px 14px;
      background: rgba(255,255,255,.62);
      border: 1px solid rgba(0,0,0,.08);
      border-radius: 14px;
      box-shadow: 0 12px 26px rgba(0,0,0,.10);
    }
    .tile{
      height:46px;
      border-radius: 12px;
      display:grid;
      place-items:center;
      font-family:"Intel One Mono", ui-monospace, monospace;
      font-weight:900;
      text-transform: uppercase;
      letter-spacing:.2px;
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(0,0,0,.10);
      cursor:pointer;
      user-select:none;
      transition: transform .08s ease, opacity .2s ease, filter .2s ease;
    }
    .tile:active{ transform: translateY(1px) scale(.99); }
    .tile.used{ opacity:.35; cursor:not-allowed; }

    .phrase{
      padding:12px 14px;
      background: rgba(255,255,255,.62);
      border: 1px solid rgba(0,0,0,.08);
      border-radius: 14px;
      box-shadow: 0 12px 26px rgba(0,0,0,.10);
      font-family:"Intel One Mono", ui-monospace, monospace;
      font-weight:900;
      text-transform: uppercase;
      letter-spacing:.25px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      color: var(--ink);
      user-select:none;
    }
    .phrase span{ opacity:.9; }
    .phrase b{ color: var(--neon2); }

    /* Mini-game: catch button floats */
    .catch{
      width: 62px;
      height: 62px;
      border-radius: 14px;
      display:grid;
      place-items:center;
      background: rgba(255,255,255,.72);
      border: 1px solid rgba(0,0,0,.10);
      box-shadow: 0 14px 30px rgba(0,0,0,.14);
      cursor:pointer;
      user-select:none;
      transition: transform .12s ease;
      z-index: 20;
    }
    .catch:active{ transform: scale(.98); }
    .catch span{ font-size: 26px; }

    .gamebar{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      padding:12px 14px;
      background: rgba(255,255,255,.62);
      border: 1px solid rgba(0,0,0,.08);
      border-radius: 14px;
      box-shadow: 0 12px 26px rgba(0,0,0,.10);
      color: var(--ink);
      font-family:"Intel One Mono", ui-monospace, monospace;
      font-weight:900;
      user-select:none;
    }
    .gamebar .score{
      display:flex;
      align-items:center;
      gap:8px;
    }
    .gamebar .score b{ color: var(--neon2); }

    /* modal */
    .modal-backdrop{
      position:fixed; inset:0;
      background: rgba(0,0,0,.62);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:50;
      padding:20px;
    }
    .modal{
      width:min(760px, 96vw);
      background: linear-gradient(180deg, rgba(255,191,214,.98), rgba(255,159,198,.98));
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.45);
      box-shadow: 0 28px 90px rgba(0,0,0,.55);
      overflow:hidden;
      position:relative;
    }
    .modal header{
      padding:14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      border-bottom: 1px solid rgba(0,0,0,.10);
      font-family:"Intel One Mono", ui-monospace, monospace;
      text-transform: uppercase;
      letter-spacing:.4px;
      color: var(--ink);
      font-weight: 900;
      user-select:none;
    }
    .x{
      border:0;
      background: rgba(255,255,255,.70);
      border:1px solid rgba(0,0,0,.10);
      width:38px; height:38px;
      border-radius: 12px;
      cursor:pointer;
      font-size:18px;
      font-weight:900;
      color: var(--ink);
      display:grid;
      place-items:center;
    }
    .modal .content{
      padding:16px;
      color: var(--ink);
      line-height:1.55;
      font-family:"Ubuntu", system-ui;
    }
    .letter{
      background: rgba(255,255,255,.72);
      border: 1px solid rgba(0,0,0,.10);
      border-radius: 16px;
      padding:14px 14px;
      box-shadow: 0 14px 30px rgba(0,0,0,.12);
    }
    .letter p{ margin:0 0 10px; }
    .letter p:last-child{ margin-bottom:0; }
    .qa{
      margin-top:12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .btn-yes{
      background: linear-gradient(180deg, #19c37d, #11a86b);
      color:white;
      box-shadow: 0 18px 40px rgba(17,168,107,.25);
    }
    .btn-no{
      background: rgba(255,255,255,.70);
      color: var(--ink);
      border:1px solid rgba(0,0,0,.10);
      position:relative;
    }

    /* toast */
    .toast{
      position:fixed;
      left:50%;
      transform: translateX(-50%);
      bottom:16px;
      padding:10px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(255,255,255,.85);
      color: var(--ink);
      font-family:"Intel One Mono", ui-monospace, monospace;
      font-weight:900;
      box-shadow: 0 18px 48px rgba(0,0,0,.35);
      z-index:60;
      display:none;
      gap:10px;
      align-items:center;
      text-transform: uppercase;
      letter-spacing:.35px;
      user-select:none;
    }

    @media (max-width: 860px){
      .screen{ grid-template-columns: 1fr; }
      .frame{ min-height: unset; }
      .characters{ max-width: 420px; }
      .tiles{ grid-template-columns: repeat(5, 1fr); }
    }
  </style>
</head>

<body>
  <div class="float-layer" id="floatLayer"></div>
  <div class="vignette"></div>
  <div class="crt"></div>

  <!-- Optional background music (put your own file with rights): assets/bg.mp3 -->
  <audio id="bgm" src="assets/bg.mp3" preload="auto" loop></audio>

  <main class="wrap">
    <section class="frame" id="frame">

      <div class="hud">
        <div class="logo">
          <span class="chip"></span>
          <span>VALENTINE QUEST</span>
        </div>

        <div class="hud-right">
          <div class="pill"><span class="dot"></span> –ö–û–ú–ù–ê–¢–ê: <b id="roomLabel">1/3</b></div>
          <div class="pill">–ü–†–û–ë–ï–õ = <b>–ö–û–ù–§–ï–¢–¢–ò</b></div>
          <div class="pill">H = <b>–°–ï–†–î–¶–ê</b></div>
        </div>
      </div>

      <div class="screen">
        <!-- LEFT -->
        <div class="panel left">
          <h1 id="headline">–ö–û–ú–ù–ê–¢–ê 1: –ü–û–ô–ú–ê–ô üíò</h1>
          <p class="sub" id="typed"></p>

          <div class="objective" id="objective"></div>

          <div class="actions">
            <button class="btn btn-primary" id="nextRoom" disabled>‚û° –î–ê–õ–¨–®–ï</button>
            <button class="btn btn-ghost" id="toggleHearts">üíñ –°–ï–†–î–¶–ê: –ù–û–†–ú–ê</button>
            <button class="btn btn-ghost" id="toggleSound" aria-pressed="false">üîà –ó–í–£–ö: –í–´–ö–õ</button>
          </div>

          <div class="hint">
            <span class="kbd">–ü–†–û–ë–ï–õ</span> –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
            <span class="kbd">H</span> —Å–µ—Ä–¥—Ü–∞
            <span class="kbd">ESC</span> –∑–∞–∫—Ä—ã—Ç—å
          </div>
        </div>

        <!-- RIGHT -->
        <div class="right">
          <div class="panel charbox">
            <div class="characters">
              <div class="bubble"><b>BUBU</b> + <b>DUDU</b> = ‚ù§Ô∏è</div>

              <!-- BUBU & DUDU SVG -->
              <svg viewBox="0 0 400 400" width="100%" height="100%" aria-label="Bubu and Dudu">
                <defs>
                  <radialGradient id="bg" cx="50%" cy="40%" r="70%">
                    <stop offset="0%" stop-color="#ffffff" stop-opacity=".75"/>
                    <stop offset="100%" stop-color="#ffd6e6" stop-opacity=".35"/>
                  </radialGradient>
                  <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
                    <feDropShadow dx="0" dy="10" stdDeviation="10" flood-color="#000" flood-opacity=".18"/>
                  </filter>
                </defs>
                <rect x="0" y="0" width="400" height="400" rx="24" fill="url(#bg)"/>
                <g opacity=".9">
                  <text x="230" y="90" font-size="22">üíó</text>
                  <text x="260" y="70" font-size="18">üíñ</text>
                  <text x="205" y="65" font-size="16">üíò</text>
                </g>

                <!-- Dudu -->
                <g filter="url(#softShadow)">
                  <circle cx="250" cy="180" r="78" fill="#ffffff" stroke="#2c2032" stroke-opacity=".08" stroke-width="3"/>
                  <circle cx="200" cy="120" r="22" fill="#ffffff" stroke="#2c2032" stroke-opacity=".08" stroke-width="3"/>
                  <circle cx="300" cy="120" r="22" fill="#ffffff" stroke="#2c2032" stroke-opacity=".08" stroke-width="3"/>
                  <circle cx="200" cy="120" r="11" fill="#2c2032" opacity=".10"/>
                  <circle cx="300" cy="120" r="11" fill="#2c2032" opacity=".10"/>
                  <circle cx="230" cy="175" r="6" fill="#1a1020"/>
                  <circle cx="270" cy="175" r="6" fill="#1a1020"/>
                  <path d="M245 190 q5 8 10 0" stroke="#1a1020" stroke-width="4" fill="none" stroke-linecap="round"/>
                  <ellipse cx="215" cy="200" rx="18" ry="10" fill="#ff2a6d" opacity=".18"/>
                  <ellipse cx="285" cy="200" rx="18" ry="10" fill="#ff2a6d" opacity=".18"/>
                  <path d="M205 245 q45 -20 90 0 q25 55 -10 100 q-35 30 -70 0 q-35 -45 -10 -100 z"
                        fill="#ffffff" stroke="#2c2032" stroke-opacity=".06" stroke-width="3"/>
                </g>

                <!-- Bubu -->
                <g filter="url(#softShadow)">
                  <circle cx="160" cy="205" r="74" fill="#c28a6f" stroke="#1a1020" stroke-opacity=".10" stroke-width="3"/>
                  <circle cx="115" cy="150" r="22" fill="#c28a6f" stroke="#1a1020" stroke-opacity=".10" stroke-width="3"/>
                  <circle cx="205" cy="150" r="22" fill="#c28a6f" stroke="#1a1020" stroke-opacity=".10" stroke-width="3"/>
                  <circle cx="115" cy="150" r="11" fill="#1a1020" opacity=".10"/>
                  <circle cx="205" cy="150" r="11" fill="#1a1020" opacity=".10"/>
                  <circle cx="140" cy="205" r="6" fill="#1a1020"/>
                  <circle cx="180" cy="205" r="6" fill="#1a1020"/>
                  <path d="M155 220 q5 8 10 0" stroke="#1a1020" stroke-width="4" fill="none" stroke-linecap="round"/>
                  <ellipse cx="125" cy="235" rx="18" ry="10" fill="#ff2a6d" opacity=".16"/>
                  <ellipse cx="195" cy="235" rx="18" ry="10" fill="#ff2a6d" opacity=".16"/>
                  <path d="M115 270 q45 -25 90 0 q30 55 -5 95 q-35 32 -75 0 q-35 -45 -10 -95 z"
                        fill="#c28a6f" stroke="#1a1020" stroke-opacity=".06" stroke-width="3"/>
                  <path d="M185 288 q55 10 70 50 q-12 12 -28 8 q-18 -26 -55 -30 z" fill="#c28a6f" opacity=".98"/>
                  <path d="M210 295 q35 12 45 35 q-10 10 -22 6 q-12 -18 -33 -22 z" fill="#c28a6f" opacity=".98"/>
                </g>

                <ellipse cx="205" cy="370" rx="150" ry="20" fill="#1a1020" opacity=".08"/>
              </svg>
            </div>
          </div>

          <div class="gamebar" id="rightHud"></div>

          <!-- Room 2 UI -->
          <div class="phrase" id="phraseBox" style="display:none;">
            <span>–§–†–ê–ó–ê:</span>
            <b id="phraseProgress">______</b>
          </div>
          <div class="tiles" id="tiles" style="display:none;"></div>

          <!-- Catch button (room 1) -->
          <button class="catch" id="catchBtn" title="–ü–æ–π–º–∞–π —Å–µ—Ä–¥–µ—á–∫–æ!" style="display:none;">
            <span>üíò</span>
          </button>
        </div>
      </div>
    </section>
  </main>

  <!-- MODAL (Room 3 final) -->
  <div class="modal-backdrop" id="backdrop" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal">
      <header>
        <span id="modalTitle">–ü–ò–°–¨–ú–û</span>
        <button class="x" id="closeModal" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      </header>

      <div class="content">
        <div class="letter" id="letter">
          <p><b>–õ—é–±–∏–º—ã–π,</b></p>

          <p>
            –Ø —Ü–µ–Ω—é –≤ —Ç–µ–±–µ —Ç–æ, —á—Ç–æ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω–µ–µ: —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ —É–≤–∞–∂–µ–Ω–∏–µ.
            –†—è–¥–æ–º —Å —Ç–æ–±–æ–π –º–Ω–µ –Ω–µ –Ω—É–∂–Ω–æ ‚Äú–¥–µ—Ä–∂–∞—Ç—å—Å—è‚Äù ‚Äî –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –±—ã—Ç—å —Å–æ–±–æ–π.
          </p>

          <p style="margin-top:12px"><b>–ù–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –æ –ª—é–±–≤–∏ ‚Äî –≤ –¥—É—Ö–µ —Ä–∞–∑–Ω—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤:</b></p>

          <p>‚Äî <i>–í –¥—É—Ö–µ –≠–∫–∑—é–ø–µ—Ä–∏:</i> –ª—é–±–∏—Ç—å ‚Äî –∑–Ω–∞—á–∏—Ç —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ–¥–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∏ –¥–µ—Ä–∂–∞—Ç—å –æ–±—â–∏–π –∫—É—Ä—Å.</p>
          <p>‚Äî <i>–í –¥—É—Ö–µ –ß–µ—Ö–æ–≤–∞:</i> –ª—é–±–æ–≤—å –≤–∏–¥–Ω–æ –Ω–µ –ø–æ —Å–ª–æ–≤–∞–º, –∞ –ø–æ —Ç–æ–º—É, –∫–∞–∫ —á–µ–ª–æ–≤–µ–∫ –∑–∞–±–æ—Ç–∏—Ç—Å—è –∏ –±–µ—Ä–µ–∂—ë—Ç.</p>
          <p>‚Äî <i>–í –¥—É—Ö–µ –ê—Ö–º–∞—Ç–æ–≤–æ–π:</i> —á—É–≤—Å—Ç–≤–æ –Ω–µ –∫—Ä–∏—á–∏—Ç ‚Äî –æ–Ω–æ –æ—Å—Ç–∞—ë—Ç—Å—è –∏ –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç.</p>
          <p>‚Äî <i>–í –¥—É—Ö–µ –¢–æ–ª—Å—Ç–æ–≥–æ:</i> –ª—é–±–æ–≤—å ‚Äî —ç—Ç–æ –≤—ã–±–æ—Ä –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç—Å—è –¥–µ–ª–∞–º–∏.</p>
          <p>‚Äî <i>–í –¥—É—Ö–µ –†–µ–º–∞—Ä–∫–∞:</i> —Å ‚Äú—Å–≤–æ–∏–º‚Äù —á–µ–ª–æ–≤–µ–∫–æ–º –º–∏—Ä –Ω–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ—â–µ ‚Äî –Ω–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–µ—Ä–µ–Ω–æ—Å–∏–º—ã–º.</p>

          <p style="opacity:.92;margin-top:12px">
            –ê –æ—Ç —Å–µ–±—è —Å–∫–∞–∂—É –∫–æ—Ä–æ—Ç–∫–æ: —Ç—ã ‚Äî –º–æ–π —á–µ–ª–æ–≤–µ–∫. –ú–Ω–µ –≤–∞–∂–Ω–æ, —á—Ç–æ –º—ã –µ—Å—Ç—å. –ò —è —ç—Ç–æ –±–µ—Ä–µ–≥—É.
          </p>

          <p style="opacity:.75;margin-top:10px">
            P.S. –¢—ã –ø—Ä–æ—à—ë–ª –≤—Å–µ –∫–æ–º–Ω–∞—Ç—ã. –ï—Å–ª–∏ —Ç—ã —Ç–æ–∂–µ –≤—ã–±–∏—Ä–∞–µ—à—å –Ω–∞—Å ‚Äî –Ω–∞–∂–º–∏ ¬´–î–ê¬ª. ‚ù§Ô∏è
          </p>
        </div>

        <div class="qa">
          <button class="btn btn-primary btn-yes" id="yesBtn">–î–ê ‚ù§Ô∏è</button>
          <button class="btn btn-no" id="noBtn">–ù–ï–¢ üôÇ</button>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">‚ú®</div>

  <script>
    // =======================
    //   GAME CONFIG (–≤—Å—ë –Ω–∞ —Ä—É—Å—Å–∫–æ–º)
    // =======================
    const GAME = {
      room: 1,
      roomsTotal: 3,

      room1Target: 7,          // –ø–æ–π–º–∞—Ç—å —Å–µ—Ä–¥–µ—á–∫–∏
      room2Phrase: "–ú–û–ô –ß–ï–õ–û–í–ï–ö", // —Å–æ–±—Ä–∞—Ç—å —Ñ—Ä–∞–∑—É (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞)

      roomText: {
        1: "–ö–û–ú–ù–ê–¢–ê 1. –Ø –ª—é–±–ª—é –±–µ–∑ –≥—Ä–æ–º–∫–∏—Ö –∂–µ—Å—Ç–æ–≤ ‚Äî —Ç–µ–ø–ª–æ–º, –≤–Ω–∏–º–∞–Ω–∏–µ–º –∏ –∑–∞–±–æ—Ç–æ–π. –ü–æ–π–º–∞–π —Å–µ—Ä–¥–µ—á–∫–∏: —ç—Ç–æ –º–æ–∏ –º–∞–ª–µ–Ω—å–∫–∏–µ ¬´—è —Ä—è–¥–æ–º¬ª.",
        2: "–ö–û–ú–ù–ê–¢–ê 2. –°–æ–±–µ—Ä–∏ —Ñ—Ä–∞–∑—É. –û–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è, –∫–∞–∫ –ø—Ä–∞–≤–¥–∞: —Ç—ã ‚Äî –º–æ–π —á–µ–ª–æ–≤–µ–∫. –ò –º–Ω–µ —Å–ø–æ–∫–æ–π–Ω–æ —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π.",
        3: "–ö–û–ú–ù–ê–¢–ê 3. –§–∏–Ω–∞–ª. –ó–¥–µ—Å—å —É–∂–µ –Ω–µ –Ω—É–∂–Ω–æ —É–≥–∞–¥—ã–≤–∞—Ç—å. –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å ‚Äî –∏ —É–ª—ã–±–Ω—É—Ç—å—Å—è.",
      }
    };

    // ====== Helpers ======
    const $ = (sel, el=document) => el.querySelector(sel);
    const rand = (a,b)=>Math.random()*(b-a)+a;

    // ====== UI refs ======
    const roomLabel = $("#roomLabel");
    const headlineEl = $("#headline");
    const typedEl = $("#typed");
    const objectiveEl = $("#objective");
    const nextRoomBtn = $("#nextRoom");
    const rightHud = $("#rightHud");

    const catchBtn = $("#catchBtn");

    const phraseBox = $("#phraseBox");
    const phraseProgress = $("#phraseProgress");
    const tilesEl = $("#tiles");

    // modal
    const backdrop = $("#backdrop");
    const closeModalBtn = $("#closeModal");
    const yesBtn = $("#yesBtn");
    const noBtn = $("#noBtn");

    // ====== Typing effect ======
    let typeRAF = null;
    function typeText(text){
      if(typeRAF) cancelAnimationFrame(typeRAF);
      typedEl.textContent = "";
      let i=0;
      const tick = ()=>{
        typedEl.textContent = text.slice(0, i);
        i = Math.min(text.length, i + 2);
        if(i < text.length) typeRAF = requestAnimationFrame(tick);
      };
      tick();
    }

    // ====== Floating hearts ======
    const layer = $("#floatLayer");
    let heartsInterval = null;
    let heartsBoost = false;

    function spawnHeart(){
      const el = document.createElement("div");
      el.className = "float-heart";
      const hearts = ["üíó","üíñ","üíò","üíù","üíû","üíì","üíü"];
      el.textContent = hearts[(Math.random()*hearts.length)|0];

      const left = rand(2, 98);
      const dur = rand(4.5, 9.5) * (heartsBoost ? 0.7 : 1);
      const size = rand(14, 28) * (heartsBoost ? 1.08 : 1);

      el.style.left = left + "vw";
      el.style.bottom = "-40px";
      el.style.fontSize = size + "px";
      el.style.animationDuration = dur + "s";
      el.style.transform = `translate3d(${rand(-12,12)}px, 0, 0)`;

      layer.appendChild(el);
      setTimeout(()=> el.remove(), dur*1000 + 200);
    }

    function startHearts(){
      if(heartsInterval) return;
      heartsInterval = setInterval(()=>{
        spawnHeart();
        if(heartsBoost) spawnHeart();
      }, heartsBoost ? 220 : 420);
    }
    function stopHearts(){
      clearInterval(heartsInterval);
      heartsInterval = null;
    }
    startHearts();

    // ====== Confetti (pure JS canvas) ======
    function confettiBurst(count=160){
      const c = document.createElement("canvas");
      c.width = innerWidth;
      c.height = innerHeight;
      c.style.position = "fixed";
      c.style.inset = "0";
      c.style.zIndex = "45";
      c.style.pointerEvents = "none";
      document.body.appendChild(c);

      const ctx = c.getContext("2d");
      const pieces = Array.from({length:count}, () => ({
        x: innerWidth/2 + rand(-40, 40),
        y: innerHeight/2 + rand(-30, 30),
        vx: rand(-6, 6),
        vy: rand(-10, -2),
        g: rand(0.18, 0.32),
        s: rand(4, 9),
        r: rand(0, Math.PI*2),
        vr: rand(-0.25, 0.25),
        a: 1,
      }));

      let t = 0;
      const maxT = 210;

      function frame(){
        t++;
        ctx.clearRect(0,0,c.width,c.height);
        pieces.forEach(p=>{
          p.vy += p.g;
          p.x += p.vx;
          p.y += p.vy;
          p.r += p.vr;
          p.a *= 0.992;

          ctx.save();
          ctx.globalAlpha = Math.max(0, p.a);
          ctx.translate(p.x, p.y);
          ctx.rotate(p.r);
          ctx.fillRect(-p.s/2, -p.s/2, p.s, p.s*0.7);
          ctx.restore();
        });

        if(t < maxT){
          requestAnimationFrame(frame);
        } else {
          c.remove();
        }
      }
      frame();
    }

    // ====== Toast ======
    const toastEl = $("#toast");
    let toastTimer = null;
    function toast(text){
      toastEl.textContent = text;
      toastEl.style.display = "flex";
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=> toastEl.style.display="none", 1600);
    }

    // =======================
    //   SOUND: BGM + SFX
    // =======================
    let soundOn = false;
    let audioCtx = null;

    const bgm = document.getElementById("bgm");
    bgm.volume = 0.35;

    function ensureAudio(){
      if(!audioCtx){
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
      if(audioCtx.state === "suspended") audioCtx.resume();
    }

    function tone({freq=440, dur=0.08, type="square", gain=0.03, slideTo=null}){
      if(!soundOn) return;
      ensureAudio();
      const o = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      o.type = type;
      o.frequency.setValueAtTime(freq, audioCtx.currentTime);
      if(slideTo){
        o.frequency.exponentialRampToValueAtTime(slideTo, audioCtx.currentTime + dur);
      }
      g.gain.setValueAtTime(gain, audioCtx.currentTime);
      g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + dur);
      o.connect(g); g.connect(audioCtx.destination);
      o.start(); o.stop(audioCtx.currentTime + dur);
    }

    function noise({dur=0.12, gain=0.02}){
      if(!soundOn) return;
      ensureAudio();
      const bufferSize = Math.floor(audioCtx.sampleRate * dur);
      const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      const data = buffer.getChannelData(0);
      for(let i=0;i<bufferSize;i++){
        data[i] = (Math.random()*2 - 1) * (1 - i/bufferSize);
      }
      const src = audioCtx.createBufferSource();
      src.buffer = buffer;
      const g = audioCtx.createGain();
      g.gain.value = gain;
      src.connect(g); g.connect(audioCtx.destination);
      src.start(); src.stop(audioCtx.currentTime + dur);
    }

    function sfxHeart(){
      tone({freq:740, dur:0.06, type:"square", gain:0.03});
      tone({freq:980, dur:0.05, type:"square", gain:0.02});
    }
    function sfxConfetti(){
      tone({freq:523.25, dur:0.06, type:"square", gain:0.03});
      tone({freq:659.25, dur:0.06, type:"square", gain:0.03});
      tone({freq:783.99, dur:0.10, type:"square", gain:0.03});
      noise({dur:0.10, gain:0.015});
    }
    function sfxOpen(){
      tone({freq:392, dur:0.08, type:"triangle", gain:0.03, slideTo:523.25});
      tone({freq:523.25, dur:0.10, type:"triangle", gain:0.03, slideTo:659.25});
    }
    function sfxNope(){
      tone({freq:220, dur:0.09, type:"sawtooth", gain:0.02, slideTo:180});
    }
    function sfxYes(){
      tone({freq:659.25, dur:0.06, type:"square", gain:0.03});
      tone({freq:783.99, dur:0.06, type:"square", gain:0.03});
      tone({freq:987.77, dur:0.12, type:"square", gain:0.03});
      noise({dur:0.08, gain:0.01});
    }

    const toggleSoundBtn = $("#toggleSound");
    toggleSoundBtn.addEventListener("click", async ()=>{
      soundOn = !soundOn;
      toggleSoundBtn.setAttribute("aria-pressed", String(soundOn));
      toggleSoundBtn.textContent = soundOn ? "üîä –ó–í–£–ö: –í–ö–õ" : "üîà –ó–í–£–ö: –í–´–ö–õ";
      toast(soundOn ? "–ó–í–£–ö –í–ö–õ–Æ–ß–ï–ù" : "–ó–í–£–ö –í–´–ö–õ–Æ–ß–ï–ù");
      if(soundOn){
        ensureAudio();
        try { await bgm.play(); } catch(e) {}
        sfxOpen();
      } else {
        bgm.pause();
      }
    });

    // ====== Hearts toggle button ======
    const toggleHeartsBtn = $("#toggleHearts");
    toggleHeartsBtn.addEventListener("click", ()=>{
      heartsBoost = !heartsBoost;
      toggleHeartsBtn.textContent = heartsBoost ? "üíñ –°–ï–†–î–¶–ê: –ú–ê–ö–°" : "üíñ –°–ï–†–î–¶–ê: –ù–û–†–ú–ê";
      toast(heartsBoost ? "–°–ï–†–î–¶–ê: –ú–ê–ö–°" : "–°–ï–†–î–¶–ê: –ù–û–†–ú–ê");
      stopHearts(); startHearts();
      sfxHeart();
    });

    // =======================
    //   ROOMS LOGIC
    // =======================

    // Room 1 state
    let room1Score = 0;

    // Room 2 state (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞)
    const targetPhrase = GAME.room2Phrase.toUpperCase().replace(/–Å/g, "–ï");
    const targetLetters = targetPhrase.replace(/[^–ê-–Ø0-9]/g, "");
    let room2Collected = "";
    let room2Tiles = [];

    function setRoom(n){
      GAME.room = n;
      roomLabel.textContent = `${n}/${GAME.roomsTotal}`;

      // Reset UI areas
      phraseBox.style.display = "none";
      tilesEl.style.display = "none";
      catchBtn.style.display = "none";
      catchBtn.style.position = "fixed";
      nextRoomBtn.disabled = true;

      // Reset button default (–≤–∞–∂–Ω–æ –ø–æ—Å–ª–µ –∫–æ–º–Ω–∞—Ç—ã 3)
      nextRoomBtn.textContent = "‚û° –î–ê–õ–¨–®–ï";
      nextRoomBtn.onclick = null;

      if(n === 1){
        headlineEl.textContent = "–ö–û–ú–ù–ê–¢–ê 1: –ü–û–ô–ú–ê–ô üíò";
        typeText(GAME.roomText[1]);

        room1Score = 0;
        renderRightHudRoom1();
        showCatchButton();
        setObjective(`–ü–æ–π–º–∞–π <b>${GAME.room1Target}</b> —Å–µ—Ä–¥–µ—á–µ–∫. –°–µ–π—á–∞—Å: <b>${room1Score}</b>.`);
      }

      if(n === 2){
        headlineEl.textContent = "–ö–û–ú–ù–ê–¢–ê 2: –°–û–ë–ï–†–ò –§–†–ê–ó–£";
        typeText(GAME.roomText[2]);

        renderRightHudRoom2();
        initRoom2();
        setObjective(`–°–æ–±–µ—Ä–∏ —Ñ—Ä–∞–∑—É: <b>${GAME.room2Phrase}</b>`);
      }

      if(n === 3){
        headlineEl.textContent = "–ö–û–ú–ù–ê–¢–ê 3: –§–ò–ù–ê–õ";
        typeText(GAME.roomText[3]);

        renderRightHudRoom3();
        setObjective(`–ù–∞–∂–º–∏ <b>–û–¢–ö–†–´–¢–¨ –ü–ò–°–¨–ú–û</b> –∏ –æ—Ç–≤–µ—Ç—å —á–µ—Å—Ç–Ω–æ ‚ù§Ô∏è`);
      }
    }

    function setObjective(html){
      objectiveEl.innerHTML = `–ó–ê–î–ê–ù–ò–ï: ${html}`;
    }

    // NEXT ROOM button
    nextRoomBtn.addEventListener("click", ()=>{
      if(GAME.room < GAME.roomsTotal){
        setRoom(GAME.room + 1);
        confettiBurst(120);
        sfxOpen();
        toast("–°–õ–ï–î–£–Æ–©–ê–Ø –ö–û–ú–ù–ê–¢–ê");
      }
    });

    // ========== ROOM 1 ==========
    function renderRightHudRoom1(){
      rightHud.innerHTML = `
        <div class="score">üß° –°–ß–Å–¢: <b id="r1Score">${room1Score}</b></div>
        <div>–ü–û–ô–ú–ê–ô üíò</div>
      `;
    }

    function showCatchButton(){
      catchBtn.style.display = "grid";
      moveCatch();
    }

    function moveCatch(){
      const frame = $("#frame");
      const rect = frame.getBoundingClientRect();
      const x = rand(rect.left + rect.width*0.62, rect.right - 90);
      const y = rand(rect.top + 120, rect.bottom - 90);
      catchBtn.style.left = Math.min(innerWidth - 90, Math.max(10, x)) + "px";
      catchBtn.style.top  = Math.min(innerHeight - 90, Math.max(10, y)) + "px";
    }

    catchBtn.addEventListener("click", ()=>{
      if(GAME.room !== 1) return;

      room1Score++;
      $("#r1Score").textContent = room1Score;

      spawnHeart();
      confettiBurst(55);
      sfxHeart();
      moveCatch();

      setObjective(`–ü–æ–π–º–∞–π <b>${GAME.room1Target}</b> —Å–µ—Ä–¥–µ—á–µ–∫. –°–µ–π—á–∞—Å: <b>${room1Score}</b>.`);

      if(room1Score >= GAME.room1Target){
        nextRoomBtn.disabled = false;
        toast("–ö–û–ú–ù–ê–¢–ê 1 –ü–†–û–ô–î–ï–ù–ê");
        sfxYes();
        confettiBurst(220);
      }
    });

    // ========== ROOM 2 ==========
    function renderRightHudRoom2(){
      rightHud.innerHTML = `
        <div class="score">üß© –°–û–ë–†–ê–ù–û: <b id="r2Count">0</b> / <b>${targetLetters.length}</b></div>
        <div>–ñ–ú–ò –ù–ê –ë–£–ö–í–´</div>
      `;
    }

    function initRoom2(){
      room2Collected = "";
      updatePhraseProgress();

      phraseBox.style.display = "flex";
      tilesEl.style.display = "grid";
      tilesEl.innerHTML = "";

      // Create tiles: all needed letters + some decoys
      const needed = targetLetters.split("");
      const decoys = [];
      const alphabet = "–ê–ë–í–ì–î–ï–ñ–ó–ò–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–™–´–¨–≠–Æ–Ø0123456789";
      const decoyCount = Math.min(10, 24 - needed.length);

      for(let i=0;i<decoyCount;i++){
        decoys.push(alphabet[(Math.random()*alphabet.length)|0]);
      }

      room2Tiles = shuffle([...needed, ...decoys]).slice(0, 24);
      while(room2Tiles.length < 24) room2Tiles.push(alphabet[(Math.random()*alphabet.length)|0]);

      room2Tiles.forEach((ch)=>{
        const btn = document.createElement("button");
        btn.className = "tile";
        btn.type = "button";
        btn.textContent = ch;
        btn.dataset.ch = ch;
        btn.addEventListener("click", ()=> onTileClick(btn));
        tilesEl.appendChild(btn);
      });

      $("#r2Count").textContent = "0";
      nextRoomBtn.disabled = true;
    }

    function updatePhraseProgress(){
      const show = [];
      let collectedIdx = 0;
      for(const ch of targetPhrase){
        if(ch === " "){
          show.push(" ");
        } else {
          show.push(collectedIdx < room2Collected.length ? room2Collected[collectedIdx++] : "_");
        }
      }
      phraseProgress.textContent = show.join("");
    }

    function onTileClick(btn){
      if(GAME.room !== 2) return;
      if(btn.classList.contains("used")) return;

      const ch = btn.dataset.ch;
      const expected = targetLetters[room2Collected.length];

      if(ch === expected){
        btn.classList.add("used");
        room2Collected += ch;

        sfxHeart();
        spawnHeart();
        $("#r2Count").textContent = String(room2Collected.length);
        updatePhraseProgress();

        if(room2Collected.length === targetLetters.length){
          nextRoomBtn.disabled = false;
          toast("–ö–û–ú–ù–ê–¢–ê 2 –ü–†–û–ô–î–ï–ù–ê");
          sfxYes();
          confettiBurst(240);
        }
      } else {
        sfxNope();
        toast("–ù–ï –¢–ê –ë–£–ö–í–ê");
        btn.style.transform = "translateX(-3px)";
        setTimeout(()=> btn.style.transform = "", 80);
      }
    }

    function shuffle(arr){
      const a = arr.slice();
      for(let i=a.length-1;i>0;i--){
        const j = (Math.random()*(i+1))|0;
        [a[i],a[j]]=[a[j],a[i]];
      }
      return a;
    }

    // ========== ROOM 3 ==========
    function renderRightHudRoom3(){
      rightHud.innerHTML = `
        <div class="score">üèÅ –°–¢–ê–¢–£–°: <b>–§–ò–ù–ê–õ</b></div>
        <div>–û–¢–ö–†–û–ô –ü–ò–°–¨–ú–û üíå</div>
      `;

      nextRoomBtn.textContent = "üíå –û–¢–ö–†–´–¢–¨ –ü–ò–°–¨–ú–û";
      nextRoomBtn.disabled = false;
      nextRoomBtn.onclick = ()=> openModal();
    }

    // ====== Modal ======
    function openModal(){
      backdrop.style.display = "flex";
      confettiBurst(180);
      sfxOpen();
      toast("–ü–ò–°–¨–ú–û –û–¢–ö–†–´–¢–û");
    }
    function closeModal(){
      backdrop.style.display = "none";
    }

    closeModalBtn.addEventListener("click", closeModal);
    backdrop.addEventListener("click", (e)=>{
      if(e.target === backdrop) closeModal();
    });

    yesBtn.addEventListener("click", ()=>{
      confettiBurst(320);
      sfxYes();
      toast("–ü–û–ë–ï–î–ê üíç");

      $("#letter").innerHTML = `
        <p><b>–§–ò–ù–ê–õ üíç</b></p>
        <p>–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø—Ä–æ—à—ë–ª —ç—Ç—É –º–∞–ª–µ–Ω—å–∫—É—é –∏–≥—Ä—É.</p>
        <p>–Ø —Ü–µ–Ω—é –Ω–∞—Å. –ò —è –≤—ã–±–∏—Ä–∞—é –Ω–∞—Å. ‚ù§Ô∏è</p>
      `;
    });

    function dodgeNo(){
      const modal = $(".modal");
      const r = modal.getBoundingClientRect();
      const x = rand(r.left + 14, r.right - 130);
      const y = rand(r.top + 70, r.bottom - 70);
      noBtn.style.position = "fixed";
      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";
      sfxNope();
      toast("–ù–ï–¢ –ù–ï –ü–†–ò–ù–ò–ú–ê–ï–¢–°–Ø üôÇ");
    }
    noBtn.addEventListener("mouseenter", dodgeNo);
    noBtn.addEventListener("click", dodgeNo);

    // ====== Keyboard shortcuts ======
    window.addEventListener("keydown", (e)=>{
      if(e.key === "Escape") closeModal();
      if(e.key === " "){
        e.preventDefault();
        confettiBurst(170);
        sfxConfetti();
        toast("–ö–û–ù–§–ï–¢–¢–ò ‚ú®");
      }
      if(e.key.toLowerCase() === "h"){
        heartsBoost = !heartsBoost;
        toggleHeartsBtn.textContent = heartsBoost ? "üíñ –°–ï–†–î–¶–ê: –ú–ê–ö–°" : "üíñ –°–ï–†–î–¶–ê: –ù–û–†–ú–ê";
        stopHearts(); startHearts();
        sfxHeart();
        toast(heartsBoost ? "–°–ï–†–î–¶–ê: –ú–ê–ö–°" : "–°–ï–†–î–¶–ê: –ù–û–†–ú–ê");
      }
    });

    window.addEventListener("resize", ()=>{
      if(GAME.room === 1) moveCatch();
    });

    // ====== Start game ======
    setRoom(1);
  </script>
</body>
</html>
